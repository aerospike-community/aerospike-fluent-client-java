# Example YAML configuration demonstrating both behaviors and system settings
# This file shows the complete structure expected by BehaviorYamlConfig.java

behaviors:
  - name: production
    parent: DEFAULT
    sendKey: true
    useCompression: true
    
    # Global settings for all operations
    allOperations:
      abandonCallAfter: 10s
      delayBetweenRetries: 50ms
      maximumNumberOfCallAttempts: 3
      replicaOrder: MASTER
      waitForCallToComplete: 1s
      waitForConnectionToComplete: 500ms
      waitForSocketResponseAfterCallFails: 100ms
    
    # Retryable write operations
    retryableWrites:
      useDurableDelete: false
      maximumNumberOfCallAttempts: 5
      delayBetweenRetries: 100ms
    
    # Non-retryable write operations
    nonRetryableWrites:
      useDurableDelete: true
      maximumNumberOfCallAttempts: 1
    
    # Batch read operations
    batchReads:
      maxConcurrentServers: 8
      allowInlineMemoryAccess: true
      allowInlineSsdAccess: false
    
    # Batch write operations
    batchWrites:
      maxConcurrentServers: 4
      allowInlineMemoryAccess: true
      allowInlineSsdAccess: false
    
    # Query operations
    query:
      recordQueueSize: 5000
      maxConcurrentServers: 4
      maximumNumberOfCallAttempts: 3
    
    # Info operations
    info:
      abandonCallAfter: 5s

  - name: highLoad
    parent: production
    
    # Override for high load scenarios
    allOperations:
      abandonCallAfter: 15s
      maximumNumberOfCallAttempts: 5
    
    # Higher concurrency for batch operations
    batchReads:
      maxConcurrentServers: 16
      allowInlineMemoryAccess: true
    
    batchWrites:
      maxConcurrentServers: 12
    
    # Larger queue for queries
    query:
      recordQueueSize: 20000
      maxConcurrentServers: 8

  - name: development
    parent: DEFAULT
    sendKey: false
    useCompression: false
    
    allOperations:
      abandonCallAfter: 5s
      maximumNumberOfCallAttempts: 1
      waitForCallToComplete: 2s

# System settings - applied at the cluster/client level
system:
  # Default settings applied to all clusters unless overridden
  default:
    connections:
      minimumConnectionsPerNode: 10
      maximumConnectionsPerNode: 200
      maximumSocketIdleTime: 120s
    
    circuitBreaker:
      numTendIntervalsInErrorWindow: 2
      maximumErrorsInErrorWindow: 50
    
    refresh:
      tendInterval: 1s

  # Cluster-specific overrides
  clusters:
    production-cluster:
      connections:
        minimumConnectionsPerNode: 20
        maximumConnectionsPerNode: 500
        maximumSocketIdleTime: 180s
      
      circuitBreaker:
        numTendIntervalsInErrorWindow: 3
        maximumErrorsInErrorWindow: 100
      
      refresh:
        tendInterval: 500ms
    
    staging-cluster:
      connections:
        minimumConnectionsPerNode: 5
        maximumConnectionsPerNode: 100
        maximumSocketIdleTime: 60s
      
      refresh:
        tendInterval: 2s
